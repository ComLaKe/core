<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Query Abstract Syntax Tree</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Comlake.core</span> <span class="project-version">0.3.0-SNAPSHOT</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1 "><a href="api.html"><div class="inner"><span>HTTP API Reference</span></div></a></li><li class="depth-1  current"><a href="qast.html"><div class="inner"><span>Query Abstract Syntax Tree</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>comlake</span></div></div></li><li class="depth-2"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></div></li><li class="depth-3"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></div></li><li class="depth-4"><a href="comlake.core.db.qast.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>qast</span></div></a></li><li class="depth-3"><a href="comlake.core.main.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>main</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#query-abstract-syntax-tree" name="query-abstract-syntax-tree"></a>Query Abstract Syntax Tree</h1>
<p>The query abstract syntax tree (query AST) is constructed from a minimal set of operators and a syntax similar to <a href="https://en.wikipedia.org/wiki/S-expression">s-expressions</a> but in JSON arrays for portability on the web platform. A valid expression is either a value (number, string, boolean or object) or an operation denoted as an array whose first element is an operator and the rest are operands. The following operators are currently supported:</p>
<table>
  <thead>
    <tr>
      <th align="center">Operator </th>
      <th align="left">Operands </th>
      <th align="left">Result </th>
      <th align="left">Description </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center"><code>.</code> </td>
      <td align="left">1 string </td>
      <td align="left">value </td>
      <td align="left">Get field from current row </td>
    </tr>
    <tr>
      <td align="center"><code>~</code> </td>
      <td align="left">2 strings </td>
      <td align="left">null/object </td>
      <td align="left">Regular expression matcher </td>
    </tr>
    <tr>
      <td align="center"><code>+</code> </td>
      <td align="left">1+ value </td>
      <td align="left">value </td>
      <td align="left">Sum or strings/arrays concatenation </td>
    </tr>
    <tr>
      <td align="center"><code>-</code> </td>
      <td align="left">1+ numbers </td>
      <td align="left">number </td>
      <td align="left">Subtraction </td>
    </tr>
    <tr>
      <td align="center"><code>*</code> </td>
      <td align="left">1+ numbers </td>
      <td align="left">number </td>
      <td align="left">Multiplication </td>
    </tr>
    <tr>
      <td align="center"><code>/</code> </td>
      <td align="left">1+ numbers </td>
      <td align="left">number </td>
      <td align="left">Division </td>
    </tr>
    <tr>
      <td align="center"><code>%</code> </td>
      <td align="left">2 numbers </td>
      <td align="left">number </td>
      <td align="left">Modulo </td>
    </tr>
    <tr>
      <td align="center"><code>&amp;</code> </td>
      <td align="left">0+ booleans </td>
      <td align="left">value </td>
      <td align="left">Logical <em>and</em> </td>
    </tr>
    <tr>
      <td align="center"><code>|</code> </td>
      <td align="left">0+ booleans </td>
      <td align="left">value </td>
      <td align="left">Logical <em>or</em> </td>
    </tr>
    <tr>
      <td align="center"><code>==</code> </td>
      <td align="left">2+ values </td>
      <td align="left">boolean </td>
      <td align="left">Equality </td>
    </tr>
    <tr>
      <td align="center"><code>!=</code> </td>
      <td align="left">2+ values </td>
      <td align="left">boolean </td>
      <td align="left">Inequality </td>
    </tr>
    <tr>
      <td align="center"><code>&gt;</code> </td>
      <td align="left">2+ values </td>
      <td align="left">boolean </td>
      <td align="left"><em>Greater than</em> comparison </td>
    </tr>
    <tr>
      <td align="center"><code>&gt;=</code> </td>
      <td align="left">2+ values </td>
      <td align="left">boolean </td>
      <td align="left"><em>Greater or equal</em> comparison </td>
    </tr>
    <tr>
      <td align="center"><code>&lt;</code> </td>
      <td align="left">2+ values </td>
      <td align="left">boolean </td>
      <td align="left"><em>Less than</em> comparison </td>
    </tr>
    <tr>
      <td align="center"><code>&lt;=</code> </td>
      <td align="left">2+ values </td>
      <td align="left">boolean </td>
      <td align="left"><em>Less or equal</em> comparison </td>
    </tr>
    <tr>
      <td align="center"><code>!</code> </td>
      <td align="left">1 boolean </td>
      <td align="left">boolean </td>
      <td align="left">Logical <em>not</em> </td>
    </tr>
  </tbody>
</table>
<p>Behaviors involving JSON <code>null</code> is deliberately left undefined. The reference implementation considers queries with operations containing <code>null</code>â€™s as malformed, but does not complain about the appearance of <code>null</code> elsewhere; however core API users must <strong>not</strong> rely on such implementation details.</p></div></div></div></body></html>